#macro (published $publishDate)
  #if ($publishDate && $publishDate.format)
    #set ($format = $publishDate.format)
  #else
    #set ($format = "yyyy-MM-dd HH:mm")
  #end
##
  $dateFormat.applyPattern($format)
##
  #set ($date = $dateFormat.format($currentDate))
##
<span class="published-date">$i18n.getString("site-renderer", $locale, "template.lastpublished"): $date</span>
#end
##
#macro (version)
<span class="project-version">$i18n.getString("site-renderer", $locale, "template.version"): ${project.version}</span>
#end
##
#macro (menu $menus)
  #foreach ($menu in $menus)
    <strong class="hide-on-phones">$menu.name</strong>
    <dl class="nice tabs vertical hide-on-phones">
      #menuItems($menu)
    </dl>
  #end
#end
##
#macro (mobileMenu $menus)
  <a name="menu">&nbsp;</a>
  <dl class="nice tabs mobile">
  #foreach ($menu in $menus)
    #menuItems($menu)
  #end
  </dl>
#end
##
#macro (menuItems $menu)
  #foreach ($item in $menu.items)
    #set ($currentItemHref = $PathTool.calculateLink($item.href, $relativePath))
    #set ($currentItemHref = $currentItemHref.replaceAll('\\', '/' ))
    #if ($alignedFileName == $currentItemHref)
      #set ($active = true)
    #else
      #set ($active = false)
    #end
<dd>#topLink($currentItemHref $item.name $item.target $active)</dd>
  #end
#end
##
#macro (topLink $href $name $target $active)
  #set ($linkTitle = ' title="' + $name + '"')
  #if ($target)
    #set ($linkTarget = ' target="' + $target + '"')
  #else
    #set ($linkTarget = "")
  #end
  #if ($active)
<a href="$href" $linkTarget title="$name" class="active">$name</a>
  #else
<a href="$href" $linkTarget title="$name" $class>$name</a>
  #end
#end
##
#macro (copyright)
  $dateFormat.applyPattern("yyyy")
  #set ($year = $dateFormat.format($currentDate))
  #set ($copyrightText = "All rights reserved")
  #set ($copyrightYear = $year)
  #if ($project)
    #if (${project.inceptionYear} && (${project.inceptionYear} != ${year}))
      #set ($copyrightYear = "${project.inceptionYear}-$year")
    #else
      #set ($copyrightYear = $year)
    #end
    #if (${project.organization})
      #if ("${project.organization.url}" != "" && "${project.organization.name}" != "")
        #set ($href = 'href="' + $project.organization.url + '"')
        #set ($copyrightText = "$copyrightText <a $href>$project.organization.name</a>")
      #elseif ("${project.organization.name}" != "")
        #set ($copyrightText = "$copyrightText $project.organization.name")
      #end
    #end
  #end
<span class="copyright">Copyright &copy; $copyrightYear. $copyrightText.</span>
#end
##
<!DOCTYPE html>
<!-- Generated by Apache Maven Doxia at $dateFormat.format( $currentDate ) -->
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"#if ( $locale ) xml:lang="$locale.language" lang="$locale.language"#else lang="en"#end> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8"       #if ( $locale ) xml:lang="$locale.language" lang="$locale.language"#else lang="en"#end> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9"              #if ( $locale ) xml:lang="$locale.language" lang="$locale.language"#else lang="en"#end> <![endif]-->
<!--[if gt IE 8]><!--> <html                              #if ( $locale ) xml:lang="$locale.language" lang="$locale.language"#else lang="en"#end> <!--<![endif]-->
<head>
  <meta charset="${outputEncoding}" />
  <!-- Set the viewport width to device width for mobile -->
  <meta name="viewport" content="width=device-width" />
#foreach( $author in $authors )
  <meta name="author" content="$author" />
#end
#if ( $dateCreation )
  <meta name="Date-Creation-yyyymmdd" content="$dateCreation" />
#end
#if ( $dateRevision )
<meta name="Date-Revision-yyyymmdd" content="$dateRevision" />
#end
  <title>$title</title>
  <!-- Included CSS Files -->
  <link rel="stylesheet" href="$relativePath/css/maven-fluid-skin.min.css">
  <!--[if lt IE 9]>
    <link rel="stylesheet" href="$relativePath/css/ie.css">
  <![endif]-->
  <!-- IE Fix for HTML5 Tags -->
  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
  <header class="container hide-on-phones">
    <div class="row">
      <h1 class="four columns">$project.name</h1>
      <div class="eight columns release-info">
        #published($decoration.publishDate)
        #version()
      </div>
    </div>
  </header>
  <div id="page" class="container">
    <div class="row">
      <div class="three columns">
        #menu($decoration.body.menus)
      </div>
      <div class="nine columns">
        $bodyContent
      </div>
    </div>
    <div class="row show-on-phones">
      <div class="twelve columns">
        #mobileMenu($decoration.body.menus)
      </div>    
    </div>
  </div>
  <footer class="container">
    <div class="row">
      <div class="twelve columns footer-info">
        #copyright()
      </div>
    </div>
  </footer>
  <script src="$relativePath/js/maven-fluid-skin.min.js"></script>
</body>
</html>
